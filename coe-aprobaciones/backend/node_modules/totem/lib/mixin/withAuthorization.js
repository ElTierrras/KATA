// Generated by CoffeeScript 1.6.3
(function() {
  var WithAuthorization;

  WithAuthorization = {
    notifiableEvents: ["requiresAuthorization"],
    withAuthorization: function(params) {
      var action, data, deferred, _ref;
      action = params.action, deferred = params.deferred;
      data = {
        handled: false
      };
      data.action = function() {
        if (data.handled) {
          return;
        }
        data.handled = true;
        return typeof action === "function" ? action() : void 0;
      };
      data.deferred = deferred;
      this.notify("requiresAuthorization", data);
      return (_ref = data.deferred) != null ? _ref.promise() : void 0;
    }
  };

  if (typeof module !== "undefined" && module !== null) {
    module.exports = WithAuthorization;
  }

}).call(this);
