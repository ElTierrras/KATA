// Generated by CoffeeScript 1.6.3
(function() {
  var AbstractUser, GuestUser, Lang,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  AbstractUser = require("./abstract");

  Lang = require("../util/lang");

  GuestUser = (function(_super) {
    __extends(GuestUser, _super);

    function GuestUser(client) {
      this.client = client;
      this.attributes = {};
      this.cache = {};
    }

    GuestUser.prototype.goods = function() {
      var d,
        _this = this;
      d = $.Deferred();
      if (this.cache.goods != null) {
        return d.resolve(Lang.clone(this.cache.goods));
      }
      this.client.get("/goods/free", function(err, goods) {
        if (err) {
          return d.reject(err);
        }
        _this.cache.goods = goods;
        return d.resolve(Lang.clone(_this.cache.goods));
      });
      return d.promise();
    };

    return GuestUser;

  })(AbstractUser);

  if (typeof module !== "undefined" && module !== null) {
    module.exports = GuestUser;
  }

}).call(this);
